@model TestProject.ViewModels.TestViewModel
@{
    ViewBag.Title = "Create test";
}
<link rel="stylesheet" type="text/css" href="~/css/page.css" />
<form method="post" asp-controller="Test" asp-action="Create" id="container" style="position: relative; padding-bottom: 50px;" enctype="multipart/form-data">
    <div class="text-danger"></div>
    <div class="form-group">
        <label asp-for="Subject" class="control-label">Предвмет</label>
        <select class="form-control" asp-for="Subject" id="source">
            @foreach (var subject in @ViewBag.subjects)
            {
                <option>@subject.Name</option>
            }
        </select>
    </div>

    <input type="button" onclick="duplicate()" id ="addQuestion" class="btn btn-outline-info" value="Добавить вопрос" style="margin-top:35px; margin-bottom:10px" />
    <div class="form-group border border-5 rounded p-2" id="div1">
        <label class="control-label" style="margin:7px 5px 7px 0px; display:inline-block">Вопрос 1</label>                  
            <select id="t" name="QuestionList[0].Type">
                <option value="A">Часть A</option>  
                <option value="B">Часть B</option>
            </select>
        <div>
            <input type="text" name="QuestionList[0].text" class="form-control" id="duplic1" style="float:left; display:inline-block; width:90%; margin:0px 16px 10px 0px" />
            <button onclick="del(this)" class="btn btn-outline-danger" id="1" style="background-color:white">Удалить</button>
        </div>
        <input type="file" size="60" name="QuestionList[0].imageUrlFile" /><br>
        <label class="control-label" style="margin:7px 5px 7px 0px">Ответы</label>
        <button onclick="return add(this)" class="btn btn-outline-info" id="v1" style="margin:7px 5px 7px 5px">Добавить</button>
        <div id="answ1" class="count">
            <input type="text" name="QuestionList[0].AnswerList[0].text" class="form-control" id="a1" style="float: left; display: inline-block; width: 77%; margin:5px 20px 0px 65px" />
            <input type="checkbox" name="QuestionList[0].AnswerList[0].isRight" value="True">
            <lable class="control-label" style="margin:7px 5px 7px 0px">Верно</lable>
            <button onclick="return delAnsw(this)" class="btn btn-outline-danger" id="w1" style="margin-top:5px">Удалить</button>
        </div>
    </div>

    <div class="form-group">
        <input type="submit" value="Создать" class="btn btn-outline-secondary" style="margin-top:30px; bottom:0px; position:absolute" />
    </div>
</form>
<script src="~/js/duplicate.js">
</script>
<script>
    var subject = document.getElementById('source');
    subject.onchange = function () {
        document.cookie = 'subject=' + subject.value + '; path=/;';
    };
    function getCookie(name) {
        var matches = document.cookie.match(new RegExp(
            "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
        ));
        return matches ? decodeURIComponent(matches[1]) : undefined;
    }
    var select = document.getElementById('source'),
        cookie = getCookie('subject');
    if (cookie) {
        select.value = cookie;
    }


    var subjectSelect = container.source;

    function changeOption() {
        location.reload();
    }

    subjectSelect.addEventListener("change", changeOption);

</script>